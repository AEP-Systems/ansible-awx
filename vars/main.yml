region: "0"
common_os_support: ["CentOS", "Ubuntu", "Amazon"]

init_docker:
  awx:
    admin_username: admin
    admin_password: "password"
    db: postgresql
    db_name: awx
    db_username: awx
    db_password: "awxpass"
    service_after: "docker.service"
    compose_path: "/data/.awx/docker-compose.yml"
    compose_commands: 
      - sed -i "s/POSTGRES_PASSWORD: awxpass/POSTGRES_PASSWORD: $new_password/g" /data/.awx/docker-compose.yml
      - sed -i "s/POSTGRES_PASSWORD=superset/POSTGRES_PASSWORD=$new_password/g" /data/wwwroot/superset/docker/.env
    commands:
      - sed -i "s/--password admin/--password $new_password/g" /data/wwwroot/superset/docker/docker-init.sh
      - cd /data/wwwroot/superset && docker-compose exec superset bash /app/docker-init.sh
    volumes: 
      - /data/pgdocker/10/data
